<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
              <script src="https://cdn.tailwindcss.com"></script>
  <title>Flying Bird Around Island</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    .fade-up {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeUp 1s ease forwards;
    }

    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .project-card:hover {
      transform: scale(1.06);
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
    }

    .glow-icon {
      animation: pulse-glow 2.5s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 0 10px rgba(255,255,255,0.5), 0 0 20px rgba(0, 0, 0, 0.2);
      }
      50% {
        box-shadow: 0 0 20px rgba(255,255,255,0.9), 0 0 30px rgba(0, 0, 0, 0.3);
      }
    }

    .rainbow-text {
      background: linear-gradient(45deg, #ff00cc, #3333ff, #00ffcc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      transition: all 0.4s ease;
    }

    .project-card:hover .rainbow-text {
      filter: brightness(1.2);
    }
    #canvas-container {
      width: 100vw;
      height: 100vh;
      display: block;
      position: relative;
    }

    #fox-message {
      position: absolute;
      display: none;
      padding: 8px 16px;
      background: rgba(0, 0, 0, 0.75);
      color: white;
      border-radius: 8px;
      font-size: 16px;
      pointer-events: none;
      z-index: 10;
      transition: opacity 0.3s ease;
    }

    /* Right corner buttons */
.right-buttons {
  position: absolute;
  top: 50px;
  right: 20px;
  display: flex;
  flex-direction: row; /* side-by-side */
  gap: 15px;
  z-index: 50;
}

.right-buttons button {
  padding: 10px 18px;
  border: none;
  border-radius: 12px;
  font-family: 'Segoe UI', sans-serif;
  font-size: 15px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  animation: glow 2s ease-in-out infinite alternate;
  background: linear-gradient(135deg, #00d2ff, #3a47d5);
  box-shadow: 0 4px 15px rgba(0, 213, 255, 0.4);
  transition: transform 0.3s ease, background 0.5s ease;
}

@keyframes glow {
  from {
    box-shadow: 0 0 10px #00d2ff, 0 0 20px #00d2ff;
  }
  to {
    box-shadow: 0 0 20px #3a47d5, 0 0 30px #3a47d5;
  }
}

.right-buttons button:hover {
  transform: scale(1.05);
  background: linear-gradient(135deg, #ff6ec4, #7873f5);
  box-shadow: 0 6px 20px rgba(255, 110, 196, 0.4);
}


/* Top bar that holds both left and right sections */
.top-bar {
  position: absolute;
  top: 20px;
  left: 20px;
  right: 20px;
  z-index: 50;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}

/* Logo + Text */
.logo-container {
  position: absolute;
  top: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 100;
}


.logo-container img {
  width: 80px;
  height: 80px;
  border-radius: 10px;
  object-fit: cover;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  animation: shine 2s infinite linear;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  transform: translateZ(0); /* force GPU rendering */
}

/* Gradient + Animation on Text */
.logo-text {
  font-size: 40px;
  font-weight: bold;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(90deg, #00d2ff, #3a47d5, #ff6ec4);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: animateText 6s ease infinite;
}

/* Buttons in a row */
.right-buttons {
  display: flex;
  gap: 80px;
}

.right-buttons button {
  padding: 15px 20px;
  border: none;
  border-radius: 12px;
  font-family: 'Segoe UI', sans-serif;
  font-size: 14px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  background: linear-gradient(135deg, #00d2ff, #3a47d5);
  box-shadow: 0 4px 15px rgba(0, 213, 255, 0.4);
  transition: transform 0.3s ease, background 0.5s ease;
}

.right-buttons button:hover {
  transform: scale(1.05);
  background: linear-gradient(135deg, #ff6ec4, #7873f5);
  box-shadow: 0 6px 20px rgba(255, 110, 196, 0.4);
}

/* Shine animation for image */
@keyframes shine {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.4); }
  100% { filter: brightness(1); }
}

/* Gradient text animation */
@keyframes animateText {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@media (max-width: 600px) {
  .logo-container {
 position: absolute;
  top: 5px;
  left: 10px;
  display: flex;
  align-items: center;
  gap: 5px;
  z-index: 50;
  }

  .logo-text {
    font-size: 16px;
  }
.logo-container img {
  width: 50px;
  height: 50px;
  border-radius: 10px;
  object-fit: cover;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  animation: shine 2s infinite linear;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  transform: translateZ(0); /* force GPU rendering */
}
  .right-buttons {
    top: 20px;
    right: 10px;
    flex-direction: row;
    align-items: flex-end;
    gap: 40px;
  }

  .right-buttons button {
    font-size: 13px;
    padding: 8px 14px;
  }  
 #about-modal .about-content {
    max-width: 1024px;
    height: auto;
    margin-top: 300%;
    padding: 5px;
  }

  #about-modal h1 {
    font-size: 28px;
  }

  #about-modal p {
    font-size: 16px;
  }

  #about-modal button {
    font-size: 16px;
    padding: 10px 20px;
  }
  /* Layout for skills-item grid */
.skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 2rem;
  margin-top: 20px;
}

/* Transition into skill bars */
.skills-item {
  background: #000;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
}
.skills-item:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}
.skills-item h3 {
  font-size: 1.2rem;
  color: #00f0ff; /* matches your gradient */
  margin-bottom: 1rem;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
}
.skills-bar {
  background: #e0e0e0;
  border-radius: 8px;
  height: 12px;
  overflow: hidden;
  position: relative;
}
.bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #00d2ff, #3a47d5, #ff6ec4);
  width: 0;
  transition: width 0.8s ease-in-out;
}
.bar-percentage {
  position: absolute;
  right: 10px;
  top: -25px;
  font-weight: bold;
  color: #fff;
}

.skill-card:hover {
  transform: scale(1.05);
  background: linear-gradient(145deg, #2a2a3d, #1e1e2f);
  color: #fff;
   }
}

#about-modal {
  position: fixed;
  top: 0px;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: radial-gradient(circle at top left, #0f2027, #203a43, #2c5364);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  flex-direction: column;
  padding: 40px 20px;
  box-sizing: border-box;
  animation: fadeIn 0.8s ease forwards;
  color: #f0f0f0;
  overflow-y: auto;
}

.about-content {
	height: 50%;
  max-width: 650px;
  background: rgba(255, 255, 255, 0.04);
  border: 2px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  padding: 40px;
  gap: 50px;
  backdrop-filter: blur(20px);
  box-shadow: 0 0 20px rgba(0, 204, 255, 0.2);
  animation: slideIn 1s ease;
}

.glow-title {
  font-size: 3rem;
  text-align: center;
  margin-bottom: 20px;
  background: linear-gradient(90deg, #00f5a0, #00d9f5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 10px #00f5a0;
}

.about-description {
  font-size: 18px;
  line-height: 1.7;
  text-align: center;
  margin-bottom: 30px;
  color: #ddd;
}

.section-title {
  font-size: 24px;
  margin-bottom: 16px;
  background: linear-gradient(90deg, #ff8a00, #e52e71);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-align: center;
}

/* Layout for skills-item grid */
.skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 2rem;
  margin-top: 20px;
}

/* Transition into skill bars */
.skills-item {
  background: #000;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
}
.skills-item:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}
.skills-item h3 {
  font-size: 1.2rem;
  color: #00f0ff; /* matches your gradient */
  margin-bottom: 1rem;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
}
.skills-bar {
  background: #e0e0e0;
  border-radius: 8px;
  height: 12px;
  overflow: hidden;
  position: relative;
}
.bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #00d2ff, #3a47d5, #ff6ec4);
  width: 0;
  transition: width 0.8s ease-in-out;
}
.bar-percentage {
  position: absolute;
  right: 10px;
  top: -25px;
  font-weight: bold;
  color: #fff;
}

.skill-card:hover {
  transform: scale(1.05);
  background: linear-gradient(145deg, #2a2a3d, #1e1e2f);
  color: #fff;
}

.goals ul {
  list-style: none;
  padding: 0;
  font-size: 18px;
  color: #ccc;
  text-align: left;
  max-width: 600px;
  margin: auto;
}

.goals li {
  margin-bottom: 12px;
  position: relative;
  padding-left: 24px;
}

.goals li::before {
  content: '✔';
  position: absolute;
  left: 0;
  color: #0ff;
}

#about-modal button {
  margin-top: 30px;
  padding: 12px 28px;
  font-size: 16px;
  background: linear-gradient(45deg, #00dbde, #fc00ff);
  border: none;
  border-radius: 10px;
  color: white;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s;
}

#about-modal button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px #00dbde;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(60px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  </style>
</head>
<body>
<div id="loader-overlay" class="fixed inset-0 bg-black z-[2000] flex flex-col items-center justify-center text-white">
  <h2 class="mb-4 text-xl">Loading 3D models....</h2>
  <div class="w-80 h-2 bg-white/10 rounded-full overflow-hidden">
    <div id="loader-bar" class="h-full bg-gradient-to-r from-blue-500 to-cyan-400 w-0 transition-all duration-300 ease-in-out"></div>
  </div>
  <p id="loader-percent" class="mt-2 text-sm">0%</p>
</div>

  <div id="canvas-container"></div>
  <div id="fox-message">Hi bro</div>

<div class="logo-container">
  <img src="RP-logo.jpg" alt="Rishaply Logo">
  <span class="logo-text">Rishaply</span>
</div>

  <div class="right-buttons">
    <button>About</button>
    <button id="projects-btn">Projects</button>
  </div>

<!-- About Modal -->
<div id="about-modal">
  <div class="about-content">
    <h1 class="glow-title">Hi, I'm Rishaply (Rishabh)</h1>
    <p class="about-description">
      A passionate web developer and programmer with 2+ years of experience building responsive, scalable web applications.
    </p>

<!-- Inside your existing #about-modal .about-content -->
<div class="skills-container">
  <h2 class="section-title">My Skills</h2>
  <div class="skills-grid">
    <!-- Convert skill-card to full skill bars -->
    <div class="skills-item">
      <h3><i class="fab fa-html5"></i> HTML</h3>
      <span class="skill-percentage">90%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:90%"><span class="bar-percentage">90%</span></div>
      </div>
    </div>
    <div class="skills-item">
      <h3><i class="fab fa-css3-alt"></i> CSS</h3>
      <span class="skill-percentage">50%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:50%"><span class="bar-percentage">50%</span></div>
      </div>
    </div>
    <div class="skills-item">
      <h3><i class="fab fa-js"></i> JavaScript</h3>
      <span class="skill-percentage">70%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:70%"><span class="bar-percentage">70%</span></div>
      </div>
    </div>
    <div class="skills-item">
      <h3><i class="fas fa-database"></i> SQL</h3>
      <span class="skill-percentage">65%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:65%"><span class="bar-percentage">65%</span></div>
      </div>
    </div>
    <div class="skills-item">
      <h3><i class="fab fa-php"></i> PHP</h3>
      <span class="skill-percentage">55%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:55%"><span class="bar-percentage">55%</span></div>
      </div>
    </div>
    <div class="skills-item">
      <h3><i class="fab fa-python"></i> Python</h3>
      <span class="skill-percentage">45%</span>
      <div class="skills-bar">
        <div class="bar-fill" style="width:45%"><span class="bar-percentage">45%</span></div>
      </div>
    </div>
  </div>
</div>

    <div class="goals">
      <h2 class="section-title">Current Goals</h2>
      <ul>
        <li>🚀 Building interactive 3D games with <strong>Three.js</strong></li>
        <li>💬 Creating a responsive chat web app</li>
        <li>📚 Enhancing my backend skills and deep learning</li>
      </ul>
    </div>

    <button id="close-about">Close</button>
  </div>
</div>

  <!-- Scripts -->
  	<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/loaders/DRACOLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/loaders/FontLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/geometries/TextGeometry.js"></script>

  <script>
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x001133);

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 5000);
    camera.position.set(1600, 1000, 150);

    const renderer = new THREE.WebGLRenderer({
  antialias: true,
  alpha: true,
  powerPreference: "high-performance"
});
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.3)); // safe, sharp, fast
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild(renderer.domElement);


    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.target.set(0, 0, 0);
    controls.update();

   const sun = new THREE.DirectionalLight(0xffffff, 1);
const ambient = new THREE.AmbientLight(0xffffff, 0.5);
    sun.position.set(100, 200, 100);
    scene.add(sun);

    scene.add(ambient);

    const clock = new THREE.Clock();
    const dracoLoader = new THREE.DRACOLoader();
    dracoLoader.setDecoderPath('https://cdn.jsdelivr.net/npm/three@0.140.2/examples/js/libs/draco/');
    const loader = new THREE.GLTFLoader();
    loader.setDRACOLoader(dracoLoader);
    
    const loaderOverlay = document.getElementById("loader-overlay");
const loaderBar = document.getElementById("loader-bar");
const loaderPercent = document.getElementById("loader-percent");

const TOTAL_MODELS = 5; // ✅ Set this to total models you load (sky, island, bird, fox, plane)
let modelsLoaded = 0;

function updateProgressBar() {
  const percent = Math.floor((modelsLoaded / TOTAL_MODELS) * 100);
  loaderBar.style.width = percent + "%";
  loaderPercent.textContent = percent + "%";

  if (modelsLoaded === TOTAL_MODELS) {
    // All models loaded
    loaderOverlay.style.transition = "opacity 1s ease";
    loaderOverlay.style.opacity = "0";
    setTimeout(() => loaderOverlay.style.display = "none", 1000);
  }
}

function failAndReload(url) {
  console.error(`Failed to load model: ${url}`);
  alert("❌ A model failed to load. Reloading...");
  setTimeout(() => location.reload(), 1500);
}
    
let plane, planeMixer;
// Place this at the top of your script (once)
let planeAngle = 0;
let planeRadius = 550; // Distance from center
let planeSpeed = 0.6;
let planeYaw = Math.random() * Math.PI * 2; // angle in radians
let planeTargetYaw = planeYaw;
let planeAltitude = 350;
let changeYawTimer = 0;
let followPlane = false;

    let bird, birdMixer;
    let fox, foxMixer, foxAction;
    let foxMoving = false;
    let foxStartTime = null;
    let foxLastAngle = 0;
    let foxPauseTime = 0;
    const foxRadius = 250;
    const foxSpeed = 0.4;

function randomizePlaneDirection() {
  const angle = Math.random() * Math.PI * 2;
  const y = (Math.random() - 0.5) * 0.5; // Up/down slight variation
  planeDirection.set(Math.cos(angle), y, Math.sin(angle)).normalize();
}

    loader.load('sky.glb', (gltf) => {
  const sky = gltf.scene;
  sky.scale.set(5, 5, 5);
  scene.add(sky);
  modelsLoaded++; updateProgressBar();
}, undefined, () => failAndReload('sky.glb'));

loader.load('island.glb', (gltf) => {
  const island = gltf.scene;
  island.scale.set(15, 15, 15);
  scene.add(island);
  modelsLoaded++; updateProgressBar();

  // Load BIRD
  loader.load('bird.glb', (gltfBird) => {
    bird = gltfBird.scene;
    bird.scale.set(0.3, 0.3, 0.3);
    bird.position.set(300, 230, 0);
    scene.add(bird);

    birdMixer = new THREE.AnimationMixer(bird);
    const clip = THREE.AnimationClip.findByName(gltfBird.animations, 'Take 001') || gltfBird.animations[0];
    if (clip) {
      const action = birdMixer.clipAction(clip);
      action.play();
      birdMixer.timeScale = 1;
    }

    modelsLoaded++; updateProgressBar();
  }, undefined, () => failAndReload('bird.glb'));

  // Load FOX
  loader.load('fox.glb', (gltfFox) => {
    fox = gltfFox.scene;
    fox.scale.set(10, 10, 10);
    fox.position.set(foxRadius, 20, 0);
    scene.add(fox);

    foxMixer = new THREE.AnimationMixer(fox);
    const foxClip = THREE.AnimationClip.findByName(gltfFox.animations, 'Walk') || gltfFox.animations[0];
    if (foxClip) {
      foxAction = foxMixer.clipAction(foxClip);
      foxAction.play();
      foxMixer.timeScale = 0;
    }

    modelsLoaded++; updateProgressBar();
  }, undefined, () => failAndReload('fox.glb'));

  // Load FONT + PLANE
  // FONT + PLANE
const fontLoader = new THREE.FontLoader();
fontLoader.load('https://threejs.org/examples/fonts/helvetiker_bold.typeface.json', function (font) {
  const textGeo = new THREE.TextGeometry('Welcome to Rishaply Universe', {
    font: font,
    size: 30,
    height: 4,
    curveSegments: 12,
    bevelEnabled: false
  });

  textGeo.computeBoundingBox();
  textGeo.center();

  const textMat = new THREE.MeshBasicMaterial({
    color: new THREE.Color("rgb(5,59,340)"),
    transparent: true,
    opacity: 0.7
  });

const hologramText = new THREE.Mesh(textGeo, textMat);
  hologramText.position.set(0, 450, 0); // center above island
  scene.add(hologramText);

  // Update rotation in your existing animate() loop
  animateCallbacks.push(() => {
    hologramText.lookAt(camera.position);
  });
});
});
loader.load('plane.glb', function (gltf) {
  plane = gltf.scene;
  plane.scale.set(125, 125, 125);
  plane.position.set(
    Math.cos(planeYaw) * 250,
    planeAltitude,
    Math.sin(planeYaw) * 250
  );
  scene.add(plane);

  planeMixer = new THREE.AnimationMixer(plane);
  if (gltf.animations.length > 0) {
    gltf.animations.forEach((clip) => {
      planeMixer.clipAction(clip).play();
    });
  }

  modelsLoaded++; updateProgressBar();
}, undefined, () => failAndReload('plane.glb'));

  

const animateCallbacks = [];


    function animate() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();
      const elapsed = clock.getElapsedTime();

      if (birdMixer) birdMixer.update(delta);
      if (foxMixer) foxMixer.update(delta);
      if (planeMixer) planeMixer.update(delta);
      
      if (bird) {
        const radius = 300;
        const speed = 0.4;
        const angle = elapsed * speed;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        const y = 230 + Math.sin(elapsed * 2) * 5;

        bird.position.set(x, y, z);
        const lookAt = new THREE.Vector3(
          Math.cos(angle + 15) * radius,
          y,
          Math.sin(angle + 10) * radius
        );
        bird.lookAt(lookAt);
      }

if (plane) {
  const deltaAngle = planeSpeed * delta;

  // Circular motion
  planeAngle += deltaAngle;
  const x = Math.cos(planeAngle) * planeRadius;
  const z = Math.sin(planeAngle) * planeRadius;

  // Dramatic up/down motion
  const waveSpeed = 0.0006; // slower = more realistic
  const waveHeight = 100;    // high value = dramatic dive/surge
  const y = planeAltitude + Math.sin(Date.now() * waveSpeed) * waveHeight;

  // Apply dramatic up/down to whole plane
  plane.position.set(x, y, z);

  // Look ahead with same wave logic
  const nextAngle = planeAngle + 0.05;
  const nextX = Math.cos(nextAngle) * planeRadius;
  const nextZ = Math.sin(nextAngle) * planeRadius;
  const nextY = planeAltitude + Math.sin(Date.now() * waveSpeed + 0.1) * waveHeight;

  plane.lookAt(new THREE.Vector3(nextX, nextY, nextZ));
}
if (followPlane && plane) {
  const camOffset = new THREE.Vector3(0, 200, -400); // Behind and above the plane
  const planeWorldPos = plane.position.clone();
  const cameraTargetPos = planeWorldPos.clone().add(camOffset);

  camera.position.lerp(cameraTargetPos, 0.1); // Smooth movement
  camera.lookAt(plane.position);
}

      if (fox) {
        const totalTime = clock.getElapsedTime();

        if (!foxStartTime) foxStartTime = totalTime;
        const elapsedFox = totalTime - foxStartTime;

        if (!foxMoving) {
          if (elapsedFox >= 5) {
            foxMoving = true;
            foxPauseTime = totalTime;
            foxLastAngle = 0;
            if (foxMixer && foxAction) {
              foxAction.reset().play();
              foxMixer.timeScale = 1;
            }
          } else {
            if (foxAction) foxAction.stop();
          }
        } else {
          const angle = (totalTime - foxPauseTime) * foxSpeed;
          const x = Math.cos(angle) * foxRadius;
          const z = Math.sin(angle) * foxRadius;
          const y = 20;

          fox.position.set(x, y, z);
          const lookAt = new THREE.Vector3(
            Math.cos(angle + 0.1) * foxRadius,
            y,
            Math.sin(angle + 0.1) * foxRadius
          );
          fox.lookAt(lookAt);

          if (angle >= Math.PI * 2) {
            foxMoving = false;
            foxStartTime = totalTime;
            if (foxMixer) foxMixer.timeScale = 0;
          }
        }
      }
  animateCallbacks.forEach(cb => cb());
      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const foxMessage = document.getElementById('fox-message');

    function showFoxMessage(screenX, screenY) {
      foxMessage.style.left = `${screenX}px`;
      foxMessage.style.top = `${screenY - 50}px`;
      foxMessage.style.display = 'block';
      setTimeout(() => {
        foxMessage.style.display = 'none';
      }, 2000);
    }

    function handleInteraction(event) {
      let clientX = event.clientX || event.touches?.[0]?.clientX;
      let clientY = event.clientY || event.touches?.[0]?.clientY;

      if (!clientX || !clientY || !bird) return;

      mouse.x = (clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(clientY / window.innerHeight) * 2 + 1;

      raycaster.setFromCamera(mouse, camera);
      const intersectsFox = raycaster.intersectObject(fox, true);

      if (intersectsFox.length > 0) {
        const screenPos = fox.position.clone().project(camera);
        const screenX = (screenPos.x * 0.5 + 0.5) * window.innerWidth;
        const screenY = (-screenPos.y * 0.5 + 0.5) * window.innerHeight;
        showFoxMessage(screenX, screenY);
      }
      if (plane) {
    const intersectsPlane = raycaster.intersectObject(plane, true);
    if (intersectsPlane.length > 0) {
      followPlane = !followPlane;
    }
  }
    }

const aboutBtn = document.querySelector('.right-buttons button:nth-child(1)');
const aboutModal = document.getElementById('about-modal');
const closeBtn = document.getElementById('close-about');

aboutBtn.addEventListener('click', () => {
  aboutModal.style.display = 'flex';
  setTimeout(() => {
    document.querySelectorAll('.bar-fill').forEach(div => {
      const target = div.style.width;
      div.style.width = '0';
      requestAnimationFrame(() => div.style.width = target);
    });
  }, 2000);
});


document.getElementById('projects-btn').addEventListener('click', () => {
	window.location.href ="projects.html";
	});
	
	
closeBtn.addEventListener('click', () => {
  aboutModal.style.display = 'none';
});

    window.addEventListener('click', handleInteraction);
    window.addEventListener('touchstart', handleInteraction);

  </script>
</body>
</html>
